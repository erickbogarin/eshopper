function ShoppingCart(c,a){return{subTotal:c,total:a,estimateFreight:function(b){return 0<b?a+b:a}}};
function ShoppingCartUI(){var c=$(".total_area").find(".price-subtotal"),b=$(".total_area").find(".price-total");return{setSubTotal:function(a){c.text(a)},getTotal:function(){return b},setTotal:function(a){b.text(a)},getFreight:function(){return parseFloat($(".price-freight").text())},getShoppingCart:function(){return new ShoppingCart(parseFloat(c.text()),parseFloat(b.text()))},evaluateFreight:function(){var a=this.getShoppingCart().estimateFreight(this.getFreight());this.setTotal(a.toFixed(2))}}}
;
urlPath=$("#urlPath").val();
var changeCartQuantityAjax=function(a){var c=a.item.find(".item_id").val(),d=a.quantity,e=a.url,f=a.item.find(".cart_quantity_input"),g=a.item.find(".cart_total_price_value"),b=a.item.find(".loading");$.ajax({method:"GET",url:e,data:{productId:c,quantity:d},beforeSend:function(){b.show()},success:function(a){b.hide();f.val(a.quantity);g.text(a.priceItem);shoppingCartUI.setSubTotal(a.priceSubTotal);shoppingCartUI.setTotal(a.priceTotal);shoppingCartUI.evaluateFreight()}})};
var correiosCalculationAjax=function(a){var e=a.find(".cep-input").val();a.find(".price-freight");var f=a.find(".price-subtotal"),g=a.find(".price-total"),h=a.find(".deadline"),d=a.find(".loading");$.ajax({method:"GET",url:urlPath+"v1/correios/calculate",data:{cep:e},beforeSend:function(){d.show()},success:function(b){d.hide();c.text(b.freight);h.text(b.deadline);a.find(".msgError").text(b.msgError);b=parseFloat(f.text());var c=parseFloat(c.text());g.text(b+c)}})};
$(function(){shoppingCartUI=new ShoppingCartUI;window.onload=shoppingCartUI.evaluateFreight();var b=function(a){a.preventDefault();a={item:$(this).closest(".cart_body"),url:a.data.url};changeCartQuantityAjax(a)};$(".cart_quantity_up").click({url:urlPath+"v1/shopping/increaseItem"},b);$(".cart_quantity_down").click({url:urlPath+"v1/shopping/decreaseItem"},b);$(".cart_quantity_input").on("change blur",{url:urlPath+"v1/shopping/changeItemQuantity"},function(a){a.preventDefault();a={item:$(this).closest(".cart_body"),
quantity:$(this).val(),url:a.data.url};changeCartQuantityAjax(a)});$(".cep-calculation").click(function(a){a.preventDefault();a=$(this).closest(".row");correiosCalculationAjax(a)});$(".cep-input").blur(function(){if(0==$(this).val().length){var a=$(this).closest(".row");correiosCalculationAjax(a)}})});
